<div class="flex flex-row justify-end pr-10">
  <dialog-data-example
    [control]="addFieldsToMaskForm"
    [data]="fieldsToMask"
    [dialogButtonText]="'Show Configuration'"
    [addFieldsToMaskForm]="addFieldsToMaskForm"
    [maskingTypes]="maskingTypes"
    (addEvent)="addFieldToMask()"
  ></dialog-data-example>
</div>

<div class="flex flex-col justify-center">
  <div class="flex flex-row justify-center">
    <!-- <textarea
      [formControl]="phiInputFormControl"
      class="w-[70vw] h-[35vh] p-4 mt-10 border border-gray-300 rounded-md text-gray-800 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
      placeholder="Paste the HL7 Message Here"
    ></textarea> -->
    <form class="textarea-form">
      <mat-form-field class="textarea-full-width">
        <mat-label>Enter HL7 Message</mat-label>
        <textarea
          class="textarea-full-width"
          matInput
          [formControl]="phiInputFormControl"
          placeholder="Paste the HL7 Message Here"
        ></textarea>
      </mat-form-field>
    </form>
  </div>

  <div class="flex flex-row justify-center">
    <button [disabled]="!(phiInputFormControl.valid && phiInputFormControl.value?.slice(0,3) == 'MSH')" (click)="maskPhi()" matButton="filled"><mat-icon>remove_red_eye</mat-icon> Mask</button>
    <button
      style="background-color: grey"
      (click)="phiInputFormControl.reset(); showResults = false"
      matButton="filled"
      ButtonType="reset"
    >
      <mat-icon>cancel</mat-icon> Reset
    </button>
  </div>
  @if (phiInputFormControl.dirty && phiInputFormControl.valid && showResults) {
  <div>
    <div class="flex flex-row justify-end mt-10">
      <img class="h-6 w-6 cursor-pointer" (click)="copyToClipboard()" src="/clipboard.svg" />
    </div>
    <!-- <textarea
      id="maskedPhiValueArea"
      class="w-[70vw] h-[35vh] p-4 border border-gray-300 rounded-md text-gray-800 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pointer-events-none"
      [value]="maskedPhiValue"
    ></textarea> -->
    <div class="flex flex-row justify-center">
      <form class="textarea-form">
        <mat-form-field class="textarea-full-width">
          <textarea class="textarea-full-width" id="maskedPhiValueArea" matInput [value]="maskedPhiValue"></textarea>
        </mat-form-field>
      </form>
    </div>
  </div>
  }
</div>
