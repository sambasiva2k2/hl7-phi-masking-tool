<div class="flex flex-col justify-center">
  <div class="flex flex-row justify-center">
    <form class="textarea-form">
      <mat-form-field class="textarea-full-width">
        <mat-label>Enter HL7 Message</mat-label>
        <textarea
          class="textarea-full-width"
          matInput
          [formControl]="phiInputFormControl"
          placeholder="Paste the HL7 Message Here"
        ></textarea>
      </mat-form-field>
    </form>
  </div>

  <div class="flex flex-row justify-center">
    <dialog-button
      [control]="addFieldsToMaskForm"
      [dialogButtonText]="'Show Configuration'"
      [addFieldsToMaskForm]="addFieldsToMaskForm"
      [maskingTypes]="maskingTypes"
      (addEvent)="addFieldToMask()"
    ></dialog-button>
    <button
      [disabled]="!(phiInputFormControl.valid && phiInputFormControl.value?.slice(0, 3) == 'MSH')"
      (click)="maskPhi()"
      matButton="filled"
    >
      <mat-icon>remove_red_eye</mat-icon> Mask
    </button>
    <button
      style="background-color: #222324"
      (click)="phiInputFormControl.reset(); showResults = false"
      matButton="filled"
      ButtonType="reset"
    >
      <mat-icon>cancel</mat-icon> Reset
    </button>
  </div>
  @if (phiInputFormControl.dirty && phiInputFormControl.valid && showResults) {
  <div class="mt-[20px]">
    <!-- <textarea
      id="maskedPhiValueArea"
      class="w-[70vw] h-[35vh] p-4 border border-gray-300 rounded-md text-gray-800 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pointer-events-none"
      [value]="maskedPhiValue"
    ></textarea> -->

    <div class="flex flex-col justify-center items-center">
      <form class="textarea-form">
        <mat-form-field class="textarea-full-width">
          <textarea
            [disabled]="true"
            class="textarea-full-width"
            id="maskedPhiValueArea"
            matInput
            [value]="maskedPhiValue"
          ></textarea>
        </mat-form-field>
      </form>
    </div>
    <div class="flex flex-row justify-center">
      <!-- <img
        matTooltip="Copy masked PHI data to clipboard"
        alt="Copy masked PHI to clipboard"
        class="h-6 w-6 cursor-pointer align-right"
        (click)="copyToClipboard()"
        src="clipboard.svg"
      /> -->

      <button (click)="copyToClipboard()" matButton="filled"><mat-icon>file_copy</mat-icon> Copy</button>
    </div>
  </div>
  }
</div>
